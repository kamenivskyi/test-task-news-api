(this["webpackJsonpwest-solutions-test-task"]=this["webpackJsonpwest-solutions-test-task"]||[]).push([[0],{33:function(e,t,a){e.exports=a(47)},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),c=a.n(s),o=a(7),l=a(6),i=a(11),u=a(26),m=a.n(u),d=a(27),p=a(12),g={GET_NEWS_LIST:"GET_NEWS_LIST",GET_NEWS_LIST_LOADING:"GET_NEWS_LIST_LOADING",GET_NEWS_LIST_ERROR:"GET_NEWS_LIST_ERROR"},E={news:[],error:!1,loading:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_NEWS_LIST:return Object(p.a)({},e,{news:t.payload,loading:!1});case g.GET_NEWS_LIST_ERROR:return Object(p.a)({},e,{error:!0,loading:!1});case g.GET_NEWS_LIST_LOADING:return Object(p.a)({},e,{loading:!0});default:return e}},f={SET_AUTH_STATUS_TRUE:"SET_AUTH_STATUS_TRUE",SET_AUTH_STATUS_FALSE:"SET_AUTH_STATUS_FALSE"},b={isLoggedIn:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SET_AUTH_STATUS_TRUE:return Object(p.a)({},e,{isLoggedIn:!0});case f.SET_AUTH_STATUS_FALSE:return Object(p.a)({},e,{isLoggedIn:!1});default:return e}},N=Object(i.c)({news:h,auth:v}),S=[d.a,m.a],T=Object(i.d)(N,i.a.apply(void 0,S)),w=a(9),_=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Home page"),r.a.createElement("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ducimus officia provident sunt excepturi? Eius recusandae ipsa vero deserunt sint sed repellat quis voluptate, deleniti repellendus assumenda soluta illo nihil nam!"))},y=a(10),A=a.n(y),L=a(14),k=a(18),O=(new function e(){var t=this;Object(k.a)(this,e),this._apiKey="bfc2f3acc4214df2ba209a463899a605",this._apiBase="http://newsapi.org/v2",this.getResource=function(){var e=Object(L.a)(A.a.mark((function e(a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch the ".concat(a,", received: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getNews=Object(L.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/top-headlines?country=us&apiKey=".concat(t._apiKey));case 2:return a=e.sent,e.abrupt("return",a.articles);case 4:case"end":return e.stop()}}),e)})))}).getNews,x=function(){return{type:g.GET_NEWS_LIST_LOADING}},I=a(2),j=a.n(I),U=(j.a.string,j.a.string,j.a.string,j.a.string,j.a.string,j.a.string,j.a.string,a(32)),R=function(e){var t=e.children,a=Object(U.a)(e,["children"]);return r.a.createElement("a",Object.assign({},a,{target:"_blank",rel:"noopener noreferer"}),t)},W=function(e){var t=e.data,a=t.title,n=t.description,s=t.author,c=t.url,o=t.urlToImage,l=t.publishedAt,i=t.content;if(!t)return null;return r.a.createElement("div",{className:"col-sm-6 col-md-4 col-lg-3 mt-2"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{src:o||"https://via.placeholder.com/150.jpg/",className:"card-img-top",alt:a||"",style:{height:"150px",objectFit:"cover"}}),r.a.createElement("div",{className:"card-body"},a&&r.a.createElement("h5",{className:"card-title"},a),n&&r.a.createElement("p",{className:"card-text"},n),i&&r.a.createElement("p",{className:"card-text"},i)),r.a.createElement("ul",{className:"list-group list-group-flush"},s&&r.a.createElement("li",{className:"list-group-item"},"Author: ",s),l&&r.a.createElement("li",{className:"list-group-item"},"Published at: ",l)),c&&r.a.createElement("div",{className:"card-body"},r.a.createElement(R,{href:c,className:"card-link"},"Link"))))},G=function(){return r.a.createElement("div",{className:"m-auto text-center py-3"},r.a.createElement("button",{className:"btn btn-dark",type:"button",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Loading...")))},F=function(){return r.a.createElement("div",null,r.a.createElement("h2",{className:"text-danger text-center"}," Oops, something went wrong!"))},C=Object(o.b)((function(e){var t=e.news;return{news:t.news,loading:t.loading,error:t.error}}),{getNewsList:function(){return function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(x()),e.next=4,O();case 4:a=e.sent,console.log(a),t({type:g.GET_NEWS_LIST,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:g.GET_NEWS_LIST_ERROR,payload:e.t0.response});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.news,a=e.loading,s=e.getNewsList,c=e.error;Object(n.useEffect)((function(){var e=!1;return e||s(),function(){return e=!0}}),[s]);var o=t.map((function(e){return r.a.createElement(W,{data:e,key:e.title})}));return c?r.a.createElement(F,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"text-center"},"News"),r.a.createElement("div",{className:"row"},a?r.a.createElement(G,null):r.a.createElement(r.a.Fragment,null,o,r.a.createElement("p",{className:"text-center col-12 my-3"},"NEWS API -",r.a.createElement(R,{href:"https://newsapi.org/"},"https://newsapi.org/")))))})),P=function(e){return r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"py-2"},"Not found 404"),r.a.createElement("img",{className:"text-center",src:"https://klondike-studio.ru/images/wiki/development/error-404-page.jpg",alt:""}),r.a.createElement(l.b,{to:"/",style:{display:"block",margin:"20px auto"}},r.a.createElement("button",{type:"button",className:"btn btn-dark"},"Back to home page")))},q=function(){return{type:f.SET_AUTH_STATUS_FALSE}},D=function(e){return JSON.parse(localStorage.getItem(e))},H=function(e,t){return JSON.stringify(localStorage.setItem(e,JSON.stringify(t)))},z=Object(o.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{setAuthStatusFalse:q})((function(e){var t=e.isLoggedIn,a=e.setAuthStatusFalse,s=function(){D("isAuthorized")||a()};Object(n.useEffect)((function(){return window.addEventListener("storage",s),function(){return window.removeEventListener("storage",s)}}),[D("isAuthorized")]);return t?r.a.createElement("article",{className:"text-center"},r.a.createElement("h2",null," Profile"),r.a.createElement("img",{src:"https://media4.s-nbcnews.com/j/newscms/2016_36/1685951/ss-160826-twip-05_8cf6d4cb83758449fd400c7c3d71aa1f.fit-760w.jpg",alt:"",style:{maxWidth:"100%"}}),r.a.createElement("p",{className:"py-2"},"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Excepturi repellat doloremque alias nostrum officia et rem vel repellendus architecto voluptate beatae dolorem aliquid ea ducimus, ipsum dignissimos cumque fugiat labore nemo perspiciatis culpa. Aliquam eius quasi, provident vero officiis dolorem quia consequatur minima, temporibus laudantium accusantium in, corrupti culpa molestias.")):r.a.createElement(w.a,{to:"/login"})})),B=a(17),J=a(29),K=a(30),M=a(31),$=function(e){Object(M.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(k.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userName:"",userPassword:""},e.handleStorageChanges=function(){D("isAuthorized")&&e.props.setAuthStatusTrue()},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(B.a)({},n,r))},e.handleSubmitForm=function(t){t.preventDefault();var a=e.state,n=a.userName,r=a.userPassword;e.checkAuthData(n,r)},e.checkAuthData=function(t,a){"admin"===t&&"12345"===a?(H("isAuthorized",!0),e.props.setAuthStatusTrue(),e.setState({userName:"",userPassword:""})):alert("The username or password you entered is incorrect")},e}return Object(J.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.handleStorageChanges)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.handleStorageChanges)}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.userPassword;return this.props.isLoggedIn?r.a.createElement(w.a,{to:"/profile"}):r.a.createElement("form",{className:"form-signin m-auto",style:{maxWidth:"320px"},onSubmit:this.handleSubmitForm},r.a.createElement("h1",{className:"h3 mb-3"},"Please sign in"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",name:"userName",autoFocus:!0,value:t,onChange:this.handleInputChange,required:!0}),r.a.createElement("input",{type:"password",className:"form-control my-3",placeholder:"Password",name:"userPassword",value:a,onChange:this.handleInputChange,required:!0}),r.a.createElement("button",{className:"btn btn-lg btn-dark btn-block",type:"submit"},"Sign in"))}}]),a}(r.a.Component),Q=Object(o.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{setAuthStatusTrue:function(){return{type:f.SET_AUTH_STATUS_TRUE}}})($),V=function(){return r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",component:_}),r.a.createElement(w.b,{exact:!0,path:"/news",component:C}),r.a.createElement(w.b,{exact:!0,path:"/profile",component:z}),r.a.createElement(w.b,{exact:!0,path:"/login",component:Q}),r.a.createElement(w.b,{component:P}))},X=(a(44),[{label:"Home",linkTo:"/",classes:"nav-item"},{label:"News",linkTo:"/news",classes:"nav-item"},{label:"Profile",linkTo:"/profile",classes:"nav-item profile-link"},{label:"Login",linkTo:"/login",classes:"nav-item"}]),Y=Object(o.b)(null,{setAuthStatusFalse:q})((function(e){var t=e.setAuthStatusFalse,a=X.map((function(e){var t=e.label,a=e.linkTo,n=e.classes;return r.a.createElement("li",{className:n,key:t},r.a.createElement(l.c,{exact:!0,className:"nav-link",to:a},t))}));return r.a.createElement("header",{className:"navbar navbar-expand-sm navbar-light bg-light"},r.a.createElement(l.b,{to:"/",className:"navbar-brand"},"Logo"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav w-100"},a),r.a.createElement("a",{href:"/login",onClick:function(e){e.preventDefault(),t(),H("isAuthorized",!1)}},"Logout")))})),Z=(a(45),a(46),function(){return r.a.createElement(l.a,null,r.a.createElement(o.a,{store:T},r.a.createElement(Y,null),r.a.createElement("div",{className:"container py-3"},r.a.createElement(V,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.49ba2dda.chunk.js.map